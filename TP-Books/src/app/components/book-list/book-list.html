<div class="list-container">
  <div class="list-header">
    <div class="header-row">
      <h2>üìñ Liste des livres</h2>
      <div class="counter-badges">
        <span class="badge badge-total">
          Total: {{ totalBooks }}
        </span>
        <span class="badge badge-available">
          Disponibles: {{ availableBooks }}
        </span>
      </div>
    </div>

    <div class="filters-row">
      <!-- Recherche -->
      <div class="search-box">
        <input 
          type="text"
          [value]="searchTerm()"
          (input)="updateSearch($any($event.target).value)"
          placeholder="üîç Rechercher un livre..."
          class="search-input">
      </div>

      <!-- Tri -->
      <div class="sort-box">
        <label for="sortBy">Trier par:</label>
        <select 
          id="sortBy"
          [value]="sortBy()"
          (change)="updateSort($any($event.target).value)"
          class="sort-select">
          <option value="none">-- Aucun --</option>
          <option value="category">Cat√©gorie</option>
          <option value="available">Disponibilit√©</option>
        </select>
      </div>
    </div>
  </div>

  @if (filteredAndSortedBooks.length === 0) {
    <div class="empty-state">
      <p>{{ searchTerm() ? 'Aucun livre trouv√© pour cette recherche' : 'Aucun livre dans la biblioth√®que' }}</p>
    </div>
  } @else {
    <div class="table-wrapper">
      <table class="books-table">
        <thead>
          <tr>
            <th>Titre</th>
            <th>Auteur</th>
            <th>Cat√©gorie</th>
            <th>Stock</th>
            <th>Disponible</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          @for (book of filteredAndSortedBooks; track book.id) {
            <tr>
              <td class="book-title">{{ book.title }}</td>
              <td>{{ book.author }}</td>
              <td>
                <span class="category-badge">{{ book.category }}</span>
              </td>
              <td class="text-center">
                @if (book.stock !== undefined) {
                  <span class="stock-badge" [class.low-stock]="book.stock < 5">
                    {{ book.stock }}
                  </span>
                } @else {
                  <span class="text-muted">-</span>
                }
              </td>
              <td class="text-center">
                @if (book.isAvailable) {
                  <span class="status-badge available">‚úì Oui</span>
                } @else {
                  <span class="status-badge unavailable">‚úó Non</span>
                }
              </td>
              <td class="actions">
                <button 
                  class="btn-action btn-edit"
                  (click)="onEdit(book)"
                  title="Modifier">
                  ‚úèÔ∏è
                </button>
                <button 
                  class="btn-action btn-delete"
                  (click)="onDelete(book.id)"
                  title="Supprimer">
                  üóëÔ∏è
                </button>
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  }
</div>
