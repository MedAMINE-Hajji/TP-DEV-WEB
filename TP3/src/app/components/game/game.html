<div class="game-container">
  <!-- Score Component -->
  <app-score 
    [score]="score()"
    [bonnesReponses]="bonnesReponses()"
    [mauvaisesReponses]="mauvaisesReponses()"
    [nombreQuestions]="nombreQuestions()">
  </app-score>
  
  <!-- Barre de progression -->
  <div class="progress-bar-container">
    <div class="progress-bar" [style.width.%]="progression()"></div>
  </div>
  
  <div class="question-info">
    <span>Question {{ questionActuelleIndex() + 1 }} / {{ nombreQuestions() }}</span>
  </div>
  
  @if (!quizTermine()) {
    <!-- Question actuelle -->
    <div class="question-card">
      <h2 class="question-text">{{ questionActuelle().question }}</h2>
      
      <div class="options-grid">
        @for (option of questionActuelle().options; track option) {
          <button 
            class="option-button"
            [class]="getOptionClass(option)"
            (click)="onSelectOption(option)"
            [disabled]="reponseVerrouille()">
            {{ option }}
            @if (reponseVerrouille() && option === questionActuelle().reponse) {
              <span class="check-icon">‚úì</span>
            }
            @if (reponseVerrouille() && option === reponseSelectionnee() && option !== questionActuelle().reponse) {
              <span class="cross-icon">‚úó</span>
            }
          </button>
        }
      </div>
      
      @if (reponseVerrouille()) {
        <div class="feedback" [class.correct]="questionActuelle().estCorrecte" [class.incorrect]="!questionActuelle().estCorrecte">
          @if (questionActuelle().estCorrecte) {
            <p>‚úì Bonne r√©ponse ! +10 points</p>
          } @else {
            <p>‚úó Mauvaise r√©ponse ! -5 points</p>
            <p>La bonne r√©ponse √©tait : <strong>{{ questionActuelle().reponse }}</strong></p>
          }
        </div>
        
        <button class="btn-next" (click)="questionSuivante()">
          {{ questionActuelleIndex() < nombreQuestions() - 1 ? 'Question Suivante' : 'Voir les R√©sultats' }}
        </button>
      }
    </div>
  } @else {
    <!-- R√©sultats finaux -->
    <div class="results-card">
      <h2>üèÜ Quiz Termin√© !</h2>
      
      <div class="final-score">
        <p class="score-value">{{ score() }}</p>
        <p class="score-label">points</p>
      </div>
      
      <div class="results-summary">
        <div class="result-item correct">
          <span class="result-icon">‚úì</span>
          <span class="result-count">{{ bonnesReponses() }}</span>
          <span class="result-label">Bonnes r√©ponses</span>
        </div>
        
        <div class="result-item incorrect">
          <span class="result-icon">‚úó</span>
          <span class="result-count">{{ mauvaisesReponses() }}</span>
          <span class="result-label">Mauvaises r√©ponses</span>
        </div>
      </div>
      
      <div class="performance">
        @if (bonnesReponses() / nombreQuestions() >= 0.8) {
          <p class="excellent">üéâ Excellent ! Vous ma√Ætrisez le sujet !</p>
        } @else if (bonnesReponses() / nombreQuestions() >= 0.6) {
          <p class="good">üëç Bien jou√© ! Continuez comme √ßa !</p>
        } @else {
          <p class="need-improvement">üí™ Continuez √† vous entra√Æner !</p>
        }
      </div>
      
      <button class="btn-restart" (click)="recommencerQuiz()">
        üîÑ Recommencer le Quiz
      </button>
    </div>
  }
</div>
